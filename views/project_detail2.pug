extends layout

block content
  p #[strong Project Detail]
  h1 #{title}
  p #[strong Complexity:] #{complexity}
  p #[strong Expense:] #{expense}
  p #[strong Materials:] #{materials}
  p #[strong Tags:] #{tags}

  hr

  h3 #[strong #{headline} ]

  include description.pug

  hr
    
.row
  .col-md-3
    p.lead YelpCamp
    .list-group
      li.list-group-item.active Info 1
      li.list-group-item Info 2
      li.list-group-item Info 3
    #map
  .col-md-9
    .thumbnail
      img.img-responsive(src='#{campground.image }')
      .caption-full
        h4.pull-right
          #{campground.cost}/night
        h4
          a #{campground.name}
        p #{campground.description}
        p
          em
            | Submitted by: 
            a(href='/users/#{= campground.author.id }') #{= campground.author.username }
            | , #{= moment(campground.createdAt).fromNow() }
        |         #{ if(currentUser && campground.author.id.equals(currentUser._id) || currentUser && currentUser.isAdmin){ }
        a.btn.btn-warning(href='/campgrounds/#{= campground._id }/edit') Edit
        form.delete-form(action='/campgrounds/#{= campground._id }?_method=DELETE', method='POST')
          button.btn.btn-danger Delete
        |         #{ } }
    .well
      .text-right
        a.btn.btn-success(href='/campgrounds/#{= campground._id }/comments/new') Add New Comment
      hr
      |       #{ campground.comments.forEach(function(comment){ }
      .row
        .col-md-12
          strong #{= comment.author.username }
          span.pull-right #{= moment(comment.createdAt).fromNow() }
          div
            | #{= comment.text } 
            | #{ if(currentUser && comment.author.id.equals(currentUser._id) || currentUser && currentUser.isAdmin){ }
            .pull-right
              a.btn.btn-xs.btn-warning(href='/campgrounds/#{=campground._id}/comments/#{=comment._id}/edit') EDIT
              form.delete-form(action='/campgrounds/#{=campground._id}/comments/#{=comment._id}?_method=DELETE', method='POST')
                button.btn.btn-xs.btn-danger DELETE
            |           #{ } }
            hr
      |     #{ }) }
script.
  function initMap() {
  var lat = #{= campground.lat };
  var lng = #{= campground.lng };
  var center = {lat: lat, lng: lng };
  var map = new google.maps.Map(document.getElementById('map'), {
  zoom: 8,
  center: center,
  scrollwheel: false
  });
  var contentString = `
  <strong>#{= campground.name }<br />
  #{= campground.location }</strong>
  <p>#{= campground.description }</p>
  `
  var infowindow = new google.maps.InfoWindow({
  content: contentString
  });
  var marker = new google.maps.Marker({
  position: center,
  map: map
  });
  marker.addListener('click', function() {
  infowindow.open(map, marker);
  });
  }
script(async='', defer='', src='https://maps.googleapis.com/maps/api/js?key=AIzaSyBkG51lwJtDvYFKTBdRZlhzYg1D4QFsXPU&callback=initMap')
| #{ include ../partials/footer }
